<!DOCTYPE html><!--  Last Published: Sun Aug 04 2024 16:01:41 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="66a7c69265151f28859a7fd8" data-wf-site="66a7c69265151f28859a7fcf">

<head>
  <meta charset="utf-8">
  <title>greatbot.ai</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link rel="stylesheet" type="text/css" href="{% url 'dynamic_css' partner=partner_name %}">

  <style>
    @media (min-width:992px) {
      html.w-mod-js:not(.w-mod-ix) [data-w-id="00b8431b-4b82-befd-fa3b-cd435a9ac36f"] {
        display: none;
        opacity: 0;
        -webkit-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -moz-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -ms-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
      }
    }

    @media (max-width:991px) and (min-width:768px) {
      html.w-mod-js:not(.w-mod-ix) [data-w-id="00b8431b-4b82-befd-fa3b-cd435a9ac36f"] {
        display: none;
        opacity: 0;
        -webkit-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -moz-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -ms-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
      }
    }

    @media (max-width:767px) and (min-width:480px) {
      html.w-mod-js:not(.w-mod-ix) [data-w-id="00b8431b-4b82-befd-fa3b-cd435a9ac36f"] {
        display: none;
        opacity: 0;
        -webkit-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -moz-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -ms-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
      }
    }

    @media (max-width:479px) {
      html.w-mod-js:not(.w-mod-ix) [data-w-id="8e48e619-230a-c101-cd3d-378ec4b1e65a"] {
        display: none;
        opacity: 0;
        width: 0rem;
        height: 0rem;
      }

      html.w-mod-js:not(.w-mod-ix) [data-w-id="00b8431b-4b82-befd-fa3b-cd435a9ac36f"] {
        display: none;
        -webkit-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -moz-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        -ms-transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        transform: translate3d(0, 1rem, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);
        opacity: 0;
      }
    }
  </style>
  <script
    type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>

<body class="body">
  <div data-w-id="8e48e619-230a-c101-cd3d-378ec4b1e65a" class="open-chat-wrapper">
    <div class="top-open-widget">
      <div class="bot-profile-svg w-embed"><svg viewbox="0 0 123 120" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_531_10)">
            <path
              d="M82.74 47.3201C84.5912 47.3201 86.4009 47.8691 87.9401 48.8976C89.4794 49.926 90.6791 51.3879 91.3875 53.0982C92.0959 54.8085 92.2813 56.6905 91.9202 58.5062C91.559 60.3218 90.6675 61.9896 89.3585 63.2986C88.0495 64.6076 86.3817 65.4991 84.566 65.8603C82.7504 66.2214 80.8684 66.0361 79.1581 65.3276C77.4478 64.6192 75.9859 63.4195 74.9574 61.8802C73.929 60.341 73.38 58.5313 73.38 56.6801C73.38 54.1977 74.3661 51.8169 76.1215 50.0616C77.8768 48.3063 80.2576 47.3201 82.74 47.3201Z"
              fill="#14CA74"></path>
            <path
              d="M40.16 47.3201C42.0112 47.3201 43.8209 47.8691 45.3601 48.8976C46.8994 49.926 48.0991 51.3879 48.8075 53.0982C49.516 54.8085 49.7013 56.6905 49.3401 58.5062C48.979 60.3218 48.0875 61.9896 46.7785 63.2986C45.4695 64.6076 43.8017 65.4991 41.986 65.8603C40.1704 66.2214 38.2884 66.0361 36.5781 65.3276C34.8678 64.6192 33.4059 63.4195 32.3774 61.8802C31.349 60.341 30.8 58.5313 30.8 56.6801C30.8 54.1977 31.7861 51.8169 33.5415 50.0616C35.2968 48.3063 37.6776 47.3201 40.16 47.3201Z"
              fill="#14CA74"></path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M57.49 23.5301V29.2001H28.57C24.4845 29.2107 20.5696 30.839 17.6816 33.7288C14.7937 36.6186 13.1679 40.5346 13.16 44.6201V46.9201H7.9C5.8055 46.928 3.79918 47.7643 2.31907 49.2462C0.838961 50.7282 0.00526756 52.7356 0 54.8301L0 73.2001C0.00528022 75.2964 0.840348 77.3052 2.32262 78.7875C3.80489 80.2698 5.81376 81.1048 7.91 81.1101H13.16V83.1801C13.1732 87.2621 14.8013 91.173 17.6887 94.0585C20.576 96.944 24.488 98.5696 28.57 98.5801H28.78L27.53 116.58C27.4946 117.255 27.7202 117.917 28.16 118.43C28.3799 118.69 28.6491 118.904 28.9519 119.059C29.2548 119.214 29.5854 119.308 29.9246 119.335C30.2639 119.362 30.6052 119.321 30.9287 119.216C31.2523 119.11 31.5518 118.942 31.81 118.72L55.23 98.6101H94.3C98.3917 98.6022 102.314 96.9746 105.209 94.0832C108.104 91.1918 109.737 87.2718 109.75 83.1801V81.1101H115C117.095 81.1022 119.101 80.266 120.581 78.784C122.061 77.302 122.895 75.2946 122.9 73.2001V54.8301C122.895 52.7356 122.061 50.7282 120.581 49.2462C119.101 47.7643 117.095 46.928 115 46.9201H109.72V44.6301C109.709 40.5428 108.082 36.6258 105.193 33.7346C102.303 30.8435 98.3873 29.2133 94.3 29.2001H65.82V23.5301C66.5155 23.2863 67.1854 22.9748 67.82 22.6001C68.6757 22.0847 69.4678 21.4705 70.18 20.7701L70.24 20.7101C71.3717 19.5841 72.269 18.245 72.88 16.7701C74.1062 13.8018 74.1062 10.4685 72.88 7.50011C71.9618 5.28009 70.4055 3.38242 68.4082 2.04733C66.4109 0.712245 64.0624 -0.000227108 61.66 0.000111548C60.0609 -0.00678321 58.4765 0.30601 57 0.920112C55.5347 1.53344 54.2032 2.4268 53.08 3.55011C51.9534 4.68415 51.057 6.02547 50.44 7.50011C49.3297 10.2042 49.229 13.2173 50.1561 15.9895C51.0832 18.7617 52.9764 21.108 55.49 22.6001C56.1319 22.9608 56.8006 23.2717 57.49 23.5301ZM28.57 34.4001H94.29C96.9972 34.408 99.591 35.4876 101.504 37.4028C103.418 39.318 104.495 41.9129 104.5 44.6201V83.1701C104.492 85.8791 103.413 88.4751 101.499 90.3916C99.5839 92.3081 96.989 93.3896 94.28 93.4001H54.28C53.9405 93.3975 53.6038 93.4625 53.2896 93.5913C52.9755 93.72 52.6901 93.91 52.45 94.1501L33.15 110.76L34.15 96.1801C34.1941 95.4941 33.9657 94.8183 33.5144 94.2997C33.0632 93.781 32.4255 93.4614 31.74 93.4101H28.57C25.861 93.3996 23.2661 92.3181 21.3515 90.4016C19.4369 88.4851 18.3579 85.8891 18.35 83.1801V44.6301C18.3579 41.9211 19.4369 39.3252 21.3515 37.4087C23.2661 35.4922 25.861 34.4107 28.57 34.4001Z"
              fill="var(--is-bright)"></path>
            <path
              d="M46.54 78.6801C46.3988 78.5689 46.2712 78.4413 46.16 78.3001C45.8359 77.9198 45.6523 77.4396 45.64 76.9401C45.6309 76.438 45.7932 75.9477 46.1 75.5501C46.2146 75.4056 46.3454 75.2747 46.49 75.1601C47.0401 74.7267 47.7164 74.4844 48.4166 74.4699C49.1168 74.4555 49.8025 74.6697 50.37 75.0801C52.079 76.4284 53.9756 77.5199 56 78.3201C57.7442 78.9947 59.6 79.3339 61.47 79.3201C63.3635 79.2799 65.2353 78.9076 67 78.2201C69.0484 77.4011 70.9814 76.3187 72.75 75.0001C73.3303 74.6044 74.0235 74.408 74.7251 74.4405C75.4267 74.473 76.0987 74.7325 76.64 75.1801C76.7757 75.3051 76.8995 75.4424 77.01 75.5901C77.304 75.996 77.452 76.4894 77.43 76.9901C77.3873 77.4909 77.1839 77.9644 76.85 78.3401C76.7232 78.4843 76.5787 78.612 76.42 78.7201C74.171 80.3822 71.7047 81.7281 69.09 82.7201C66.6814 83.6282 64.1338 84.112 61.56 84.1501C58.9832 84.1861 56.4214 83.7523 54 82.8701C51.3313 81.8717 48.832 80.4686 46.59 78.7101L46.54 78.6801Z"
              fill="var(--brand-accent)"></path>
          </g>
          <defs>
            <clippath id="clip0_531_10">
              <rect width="122.88" height="119.35" fill="none"></rect>
            </clippath>
          </defs>
        </svg></div>
      <div class="txt-top-wrapper">
        <div class="chat-h-small">greatbot.ai</div>
        <div class="chat-sub-h">Online</div>
      </div>
      <div class="close-chat-btn">
        <div class="open-icon-chat w-embed"><svg viewbox="0 0 64 65" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M43.5478 31.4119C43.2573 31.1214 42.8633 30.9582 42.4526 30.9582C42.0417 30.9582 41.6478 31.1214 41.3574 31.4119L33.0449 39.7243L33.0559 21.5552C33.0559 21.1427 32.892 20.7471 32.6004 20.4555C32.3087 20.1638 31.9131 20 31.5007 20C31.0882 20 30.6927 20.1638 30.401 20.4555C30.1094 20.7471 29.9455 21.1427 29.9455 21.5552L29.9565 39.7243L21.644 31.4119C21.3535 31.1214 20.9596 30.9583 20.5488 30.9582C20.1381 30.9582 19.7441 31.1214 19.4536 31.4119C19.1632 31.7023 19 32.0963 19 32.507C19 32.9178 19.1632 33.3118 19.4536 33.6022L30.4055 44.5541C30.5504 44.6955 30.7216 44.8071 30.9093 44.8827C31.288 45.0391 31.7133 45.0392 32.0921 44.8827C32.2798 44.8071 32.451 44.6955 32.5959 44.5541L43.5478 33.6022C43.8382 33.3118 44.0014 32.9178 44.0014 32.5071C44.0014 32.0963 43.8382 31.7023 43.5478 31.4119Z"
              fill="var(--is-bright)"></path>
          </svg></div>
      </div>
    </div>
    <div class="mid-open-chat">
      <div data-w-id="00b8431b-4b82-befd-fa3b-cd435a9ac36f" class="msg-initial">
        <div class="txt-bot-msg is-h">Hey! Herzlich willkommen 👋🏼 </div>
        <div class="txt-bot-msg">Ich bin Greatbot und beantworte Ihnen gerne alle Fragen zu unseren Leistungen und
          unserem Unternehmen {{customer.company_name}} - wie kann ich Ihnen helfen?</div>
      </div>
    </div>
    <div class="btm-open-chat">
      <div class="form-wrapper w-form">
        <form id="email-form" name="email-form" data-name="Email Form"  method="post"
          class="form-field-horizontal" data-wf-page-id="66a7c69265151f28859a7fd8"
          data-wf-element-id="53ff900b-9c01-2163-9334-df05b2b5b500"><input class="input-field w-input" maxlength="256"
            name="TextInput" data-name="TextInput" placeholder="" type="text" id="TextInput" required=""><button
            class="submit-btn" onclick="sendMessage()">
            <div class="btn-txt">Senden</div>
          </button></form>
      </div>
    </div>
  </div>
  <div data-w-id="5f8f3504-bb90-ff16-9c00-46d2d823f8be" class="open-chat-btn">
    <div class="icon-chat w-embed"><svg viewbox="0 0 123 120" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_531_10)">
          <path
            d="M82.74 47.3201C84.5912 47.3201 86.4009 47.8691 87.9401 48.8976C89.4794 49.926 90.6791 51.3879 91.3875 53.0982C92.0959 54.8085 92.2813 56.6905 91.9202 58.5062C91.559 60.3218 90.6675 61.9896 89.3585 63.2986C88.0495 64.6076 86.3817 65.4991 84.566 65.8603C82.7504 66.2214 80.8684 66.0361 79.1581 65.3276C77.4478 64.6192 75.9859 63.4195 74.9574 61.8802C73.929 60.341 73.38 58.5313 73.38 56.6801C73.38 54.1977 74.3661 51.8169 76.1215 50.0616C77.8768 48.3063 80.2576 47.3201 82.74 47.3201Z"
            fill="#14CA74"></path>
          <path
            d="M40.16 47.3201C42.0112 47.3201 43.8209 47.8691 45.3601 48.8976C46.8994 49.926 48.0991 51.3879 48.8075 53.0982C49.516 54.8085 49.7013 56.6905 49.3401 58.5062C48.979 60.3218 48.0875 61.9896 46.7785 63.2986C45.4695 64.6076 43.8017 65.4991 41.986 65.8603C40.1704 66.2214 38.2884 66.0361 36.5781 65.3276C34.8678 64.6192 33.4059 63.4195 32.3774 61.8802C31.349 60.341 30.8 58.5313 30.8 56.6801C30.8 54.1977 31.7861 51.8169 33.5415 50.0616C35.2968 48.3063 37.6776 47.3201 40.16 47.3201Z"
            fill="#14CA74"></path>
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M57.49 23.5301V29.2001H28.57C24.4845 29.2107 20.5696 30.839 17.6816 33.7288C14.7937 36.6186 13.1679 40.5346 13.16 44.6201V46.9201H7.9C5.8055 46.928 3.79918 47.7643 2.31907 49.2462C0.838961 50.7282 0.00526756 52.7356 0 54.8301L0 73.2001C0.00528022 75.2964 0.840348 77.3052 2.32262 78.7875C3.80489 80.2698 5.81376 81.1048 7.91 81.1101H13.16V83.1801C13.1732 87.2621 14.8013 91.173 17.6887 94.0585C20.576 96.944 24.488 98.5696 28.57 98.5801H28.78L27.53 116.58C27.4946 117.255 27.7202 117.917 28.16 118.43C28.3799 118.69 28.6491 118.904 28.9519 119.059C29.2548 119.214 29.5854 119.308 29.9246 119.335C30.2639 119.362 30.6052 119.321 30.9287 119.216C31.2523 119.11 31.5518 118.942 31.81 118.72L55.23 98.6101H94.3C98.3917 98.6022 102.314 96.9746 105.209 94.0832C108.104 91.1918 109.737 87.2718 109.75 83.1801V81.1101H115C117.095 81.1022 119.101 80.266 120.581 78.784C122.061 77.302 122.895 75.2946 122.9 73.2001V54.8301C122.895 52.7356 122.061 50.7282 120.581 49.2462C119.101 47.7643 117.095 46.928 115 46.9201H109.72V44.6301C109.709 40.5428 108.082 36.6258 105.193 33.7346C102.303 30.8435 98.3873 29.2133 94.3 29.2001H65.82V23.5301C66.5155 23.2863 67.1854 22.9748 67.82 22.6001C68.6757 22.0847 69.4678 21.4705 70.18 20.7701L70.24 20.7101C71.3717 19.5841 72.269 18.245 72.88 16.7701C74.1062 13.8018 74.1062 10.4685 72.88 7.50011C71.9618 5.28009 70.4055 3.38242 68.4082 2.04733C66.4109 0.712245 64.0624 -0.000227108 61.66 0.000111548C60.0609 -0.00678321 58.4765 0.30601 57 0.920112C55.5347 1.53344 54.2032 2.4268 53.08 3.55011C51.9534 4.68415 51.057 6.02547 50.44 7.50011C49.3297 10.2042 49.229 13.2173 50.1561 15.9895C51.0832 18.7617 52.9764 21.108 55.49 22.6001C56.1319 22.9608 56.8006 23.2717 57.49 23.5301ZM28.57 34.4001H94.29C96.9972 34.408 99.591 35.4876 101.504 37.4028C103.418 39.318 104.495 41.9129 104.5 44.6201V83.1701C104.492 85.8791 103.413 88.4751 101.499 90.3916C99.5839 92.3081 96.989 93.3896 94.28 93.4001H54.28C53.9405 93.3975 53.6038 93.4625 53.2896 93.5913C52.9755 93.72 52.6901 93.91 52.45 94.1501L33.15 110.76L34.15 96.1801C34.1941 95.4941 33.9657 94.8183 33.5144 94.2997C33.0632 93.781 32.4255 93.4614 31.74 93.4101H28.57C25.861 93.3996 23.2661 92.3181 21.3515 90.4016C19.4369 88.4851 18.3579 85.8891 18.35 83.1801V44.6301C18.3579 41.9211 19.4369 39.3252 21.3515 37.4087C23.2661 35.4922 25.861 34.4107 28.57 34.4001Z"
            fill="var(--is-bright)"></path>
          <path
            d="M46.54 78.6801C46.3988 78.5689 46.2712 78.4413 46.16 78.3001C45.8359 77.9198 45.6523 77.4396 45.64 76.9401C45.6309 76.438 45.7932 75.9477 46.1 75.5501C46.2146 75.4056 46.3454 75.2747 46.49 75.1601C47.0401 74.7267 47.7164 74.4844 48.4166 74.4699C49.1168 74.4555 49.8025 74.6697 50.37 75.0801C52.079 76.4284 53.9756 77.5199 56 78.3201C57.7442 78.9947 59.6 79.3339 61.47 79.3201C63.3635 79.2799 65.2353 78.9076 67 78.2201C69.0484 77.4011 70.9814 76.3187 72.75 75.0001C73.3303 74.6044 74.0235 74.408 74.7251 74.4405C75.4267 74.473 76.0987 74.7325 76.64 75.1801C76.7757 75.3051 76.8995 75.4424 77.01 75.5901C77.304 75.996 77.452 76.4894 77.43 76.9901C77.3873 77.4909 77.1839 77.9644 76.85 78.3401C76.7232 78.4843 76.5787 78.612 76.42 78.7201C74.171 80.3822 71.7047 81.7281 69.09 82.7201C66.6814 83.6282 64.1338 84.112 61.56 84.1501C58.9832 84.1861 56.4214 83.7523 54 82.8701C51.3313 81.8717 48.832 80.4686 46.59 78.7101L46.54 78.6801Z"
            fill="var(--brand-accent)"></path>
        </g>
        <defs>
          <clippath id="clip0_531_10">
            <rect width="122.88" height="119.35" fill="none"></rect>
          </clippath>
        </defs>
      </svg></div>
    <div data-w-id="4d2d5dc5-4af9-e8ff-b6aa-5dd6fbbf9238" class="open-icon-chat w-embed"><svg viewbox="0 0 64 65"
        fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M43.5478 31.4119C43.2573 31.1214 42.8633 30.9582 42.4526 30.9582C42.0417 30.9582 41.6478 31.1214 41.3574 31.4119L33.0449 39.7243L33.0559 21.5552C33.0559 21.1427 32.892 20.7471 32.6004 20.4555C32.3087 20.1638 31.9131 20 31.5007 20C31.0882 20 30.6927 20.1638 30.401 20.4555C30.1094 20.7471 29.9455 21.1427 29.9455 21.5552L29.9565 39.7243L21.644 31.4119C21.3535 31.1214 20.9596 30.9583 20.5488 30.9582C20.1381 30.9582 19.7441 31.1214 19.4536 31.4119C19.1632 31.7023 19 32.0963 19 32.507C19 32.9178 19.1632 33.3118 19.4536 33.6022L30.4055 44.5541C30.5504 44.6955 30.7216 44.8071 30.9093 44.8827C31.288 45.0391 31.7133 45.0392 32.0921 44.8827C32.2798 44.8071 32.451 44.6955 32.5959 44.5541L43.5478 33.6022C43.8382 33.3118 44.0014 32.9178 44.0014 32.5071C44.0014 32.0963 43.8382 31.7023 43.5478 31.4119Z"
          fill="var(--is-bright)"></path>
      </svg></div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66a7c69265151f28859a7fcf"
    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
  <script type="text/javascript" src="{% url 'dynamic_js' partner=partner_name %}"></script>
  <script>
    var id_count = 0;
    var uid = "";
    var chatbotResponses = 0;

    function sendPersonalData() {
      var name = document.getElementById("NameInput").value;
      var email = document.getElementById("Mail-Input").value;

      if (name.trim() !== "" && email.trim() !== "") {
        // Prepare and send the request
        let token = "{{ csrf_token }}";
        let formedData = new FormData();
        formedData.append("name", name);
        formedData.append("email", email);
        formedData.append("uid", uid);

        fetch("saveuserdata/", {
          method: "POST",
          headers: {
            'X-CSRFToken': token,
          },
          body: formedData
        })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              // Show thank you message
              const chatMessages = document.querySelector('.mid-open-chat');
              const thankYouMessageElement = document.createElement("div");
              thankYouMessageElement.innerHTML = '<div class="txt-bot-msg">Vielen Dank ! Es wird sich zeitnah jemand bei Ihnen melden. Wenn ich Ihnen sonst noch behilflich sein kann, fragen Sie gerne weiter.</div>';
              chatMessages.appendChild(thankYouMessageElement);
              chatMessages.scrollTop = chatMessages.scrollHeight;
            }
          })
          .catch(error => {
            console.error("Error:", error);
          });
      }
    }

    function sendMessage() {
      console.log("Message sent");
      console.log(document.getElementById('mid-open-chat'));


      var messageInput = document.getElementById("TextInput");
      var message = messageInput.value;
      if (message.trim() !== "") {
        const chatMessages = document.querySelector('.mid-open-chat');
        const messageId = id_count; // Store the current id_count for the new message

        // Create and append user message element
        const userMessageElement = document.createElement("div");
        userMessageElement.className = "msg-user";
        userMessageElement.innerHTML = '<div class="txt-user-msg">' + message + '</div>';
        chatMessages.appendChild(userMessageElement);

        // Create and append loading message element
        const assistantMessageElement = document.createElement("div");
        assistantMessageElement.className = "msg-bot";
        assistantMessageElement.id = "loading_message" + messageId;
        assistantMessageElement.innerHTML = '<div class="txt-bot-msg">...</div>';
        chatMessages.appendChild(assistantMessageElement);

       

        messageInput.value = "";

        // Prepare and send the request
        let token = "{{ csrf_token }}";
        let formedData = new FormData();
        formedData.append("message", message);
        formedData.append("uid", uid);
        formedData.append("chatbotResponses", chatbotResponses);

        fetch("sendmessage/", {
          method: "POST",
          headers: {
            'X-CSRFToken': token,
          },
          body: formedData
        })
          .then(response => response.json())
          .then(data => {
            if (data.uid) {
              uid = data.uid;
              console.log(uid);
            }
            if (data.answer_chat_assistant) {
              // Update the correct loading message element
              const loadingMessageElement = document.getElementById("loading_message" + messageId);
              if (loadingMessageElement) {
                loadingMessageElement.innerHTML = '<div class="txt-bot-msg">' + data.answer_chat_assistant + '</div>';
                loadingMessageElement.removeAttribute("id"); // Remove id after updating
                chatMessages.scrollTop = chatMessages.scrollHeight;
              }

              chatbotResponses++;
              if (chatbotResponses == 2) {
                addContactForm();
              }
            }
            id_count++; // Increment the id_count for the next message
          })
          .catch(error => {
            console.error("Error:", error);
            // Optionally update the loading message with an error message
            const loadingMessageElement = document.getElementById("loading_message" + messageId);
            if (loadingMessageElement) {
              loadingMessageElement.innerHTML = '<div class="txt-bot-msg">Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.</div>';
            }
          });
      }
    }

    function createMessageElement(text, type, id = null) {
      var messageElement = document.createElement("div");
      if (id) {
        messageElement.id = id; // Set the provided ID
      }
      messageElement.classList.add("message", type);

      var textElement = document.createElement("div");
      textElement.classList.add("text");
      if (text === "...") {
        textElement.classList.add("loading-dots");
        textElement.innerHTML = '<span>.</span><span>.</span><span>.</span>';
      } else {
        textElement.innerHTML = text;
      }

      messageElement.appendChild(textElement);
      return messageElement;
    }

    function addContactForm() {
      const chatMessages = document.querySelector('.mid-open-chat');
      const contactFormElement = document.createElement("div");
      contactFormElement.classList.add("message", "received");
      contactFormElement.innerHTML = `
      <div class="msg-form">
        <div class="form-wrapper w-form">
          <form id="wf-form-MailForm" name="wf-form-MailForm" onsubmit="sendPersonalData()" data-name="MailForm"
            class="form-fields-vertical" data-wf-page-id="66a7c69265151f28859a7fd8"
            data-wf-element-id="1e12b748-a42b-8ced-9b81-da026256e23e">
            <div class="txt-bot-msg">Wenn Sie möchten, kontaktieren wir Sie gerne persönlich und geben Ihnen weitere Informationen:</div><label for="Mail-Input" class="txt-bot-msg">Ihre Mailadresse</label><input
              class="input-field w-input" maxlength="256" name="Mail-Input" data-name="Mail Input" placeholder=""
              type="email" id="Mail-Input" required=""><label for="NameInput" class="txt-bot-msg">Ihren
              Namen</label><input class="input-field w-input" maxlength="256" name="NameInput" data-name="NameInput"
              placeholder="" type="text" id="NameInput" required=""><button onclick="sendPersonalData()" type="submit" class="submit-btn is-left">
              <div class="btn-txt">Bestätigen</div>
            </button>
          </form>
        </div>
      </div>`;
      chatMessages.appendChild(contactFormElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
  </script>
 
</body>

</html>